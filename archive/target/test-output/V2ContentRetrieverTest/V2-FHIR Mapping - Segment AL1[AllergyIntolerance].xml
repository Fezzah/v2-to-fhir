<?xml version="1.0" encoding="UTF-8"?>
<!-- DTD used to support HTML entities in content in Confluence -->
<div xmlns:ac="http://www.atlassian.com/schema/confluence/4/ac/"
     xmlns:at="http://www.atlassian.com/schema/confluence/4/at/"
     xmlns:ri="http://www.atlassian.com/schema/confluence/4/ri/">
   <p class="auto-cursor-target">v2 Description: The AL1 segment contains patient allergy information of various types.  Most of this information will be derived from user-defined tables.  Each AL1 segment describes a single patient allergy.</p>
   <p>
      <span style="color: rgb(51,51,51);">FHIR Description (AllergyIntolerance): <span style="color: rgb(51,51,51);">Risk of harmful or undesirable, physiological response which is unique to an individual and associated with exposure to a substance.</span>
      </span>
   </p>
   <p>
      <br/>
   </p>
   <p>The v2 description of AL1 indicates that each "AL1 segment describes a single patient allergy". Presumably this means that the same code in AL1-3 will not be present multiple times in a given message. That is, if a single patient was exposed to the same allergen twice (and maybe even had a different reaction each time (rash the first time and anaphylaxis the second time)), there would still only be a single AL1 segment (albeit with multiple reactions listed). In that case, a single AllergyIntolerance resouce would be created with multiple AllergyIntolerance.reaction elements. Does this match real life experience with AL1 segments?</p>
   <p>
      <br/>
   </p>
   <table class="wrapped">
      <colgroup>
         <col/> 
         <col/> 
         <col/> 
         <col/> 
         <col/> 
         <col/>
         <col/>
         <col/>
         <col/>
         <col/>
         <col/>
      </colgroup>
      <tbody>
         <tr>
            <td class="highlight-green"
                colspan="4"
                data-highlight-colour="green"
                style="text-align: center;"
                title="Background colour : Green">
               <strong title="">HL7 V2</strong>
            </td>
            <td rowspan="2">
               <br/>
            </td>
            <td class="highlight-yellow"
                colspan="4"
                data-highlight-colour="yellow"
                style="text-align: center;"
                title="Background colour : Yellow">
               <strong title="">HL7 FHIR</strong>
            </td>
            <td rowspan="2">
               <br/>
            </td>
            <td class="highlight-blue"
                data-highlight-colour="blue"
                rowspan="2"
                title="Background colour : Blue">
               <strong title="">Comments</strong>
            </td>
         </tr>
         <tr>
            <td class="highlight-green"
                data-highlight-colour="green"
                title="Background colour : Green">
               <strong title="">Name</strong>
            </td>
            <td class="highlight-green"
                data-highlight-colour="green"
                title="Background colour : Green">
               <strong title="">Definition</strong>
            </td>
            <td class="highlight-green"
                data-highlight-colour="green"
                title="Background colour : Green">
               <strong title="">DataType</strong>
            </td>
            <td class="highlight-green"
                data-highlight-colour="green"
                title="Background colour : Green">
               <strong title="">Mapping Rules</strong>
            </td>
            <td class="highlight-yellow"
                data-highlight-colour="yellow"
                title="Background colour : Yellow">
               <strong title="">Name</strong>
            </td>
            <td class="highlight-yellow"
                data-highlight-colour="yellow"
                title="Background colour : Yellow">
               <strong title="">Definition</strong>
            </td>
            <td class="highlight-yellow"
                data-highlight-colour="yellow"
                title="Background colour : Yellow">
               <strong title="">Data Type</strong>
            </td>
            <td class="highlight-yellow"
                data-highlight-colour="yellow"
                title="Background colour : Yellow">
               <strong title="">Mapping Rules</strong>
            </td>
         </tr>
         <tr>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">AllergyIntolerance.id</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">There is no identifier in the AL1 segment. An ID may need to be created based on the patient ID and either a counter or the allergen code.</td>
         </tr>
         <tr>
            <td colspan="1">AL1-01.00.00 - Set ID - AL1</td>
            <td colspan="1">This field contains the number that identifies this transaction.</td>
            <td colspan="1">SI</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <span>This field doesn't warrant mapping</span>
            </td>
         </tr>
         <tr>
            <td colspan="1">
               <span>AL1-02.00.00 - Allergen Type Code</span>
            </td>
            <td colspan="1">This field indicates a general allergy category (drug, food, pollen, etc.).  </td>
            <td colspan="1">CWE</td>
            <td colspan="1">HL70127 is a user defined table</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">AllergyIntolerance.category</td>
            <td colspan="1">
               <span style="color: rgb(51,51,51);">Category of the identified substance.</span>
            </td>
            <td colspan="1">code</td>
            <td colspan="1">
               <p>Need a mapping table</p>
               <table class="wrapped">
                  <tbody>
                     <tr>
                        <th>v2</th>
                        <th>FHIR</th>
                     </tr>
                     <tr>
                        <td>
                           <p class="UserTableBody">Drug allergy</p>
                        </td>
                        <td>medication</td>
                     </tr>
                     <tr>
                        <td colspan="1">
                           <p class="UserTableBody">Food allergy</p>
                        </td>
                        <td colspan="1">food</td>
                     </tr>
                     <tr>
                        <td colspan="1">
                           <p class="UserTableBody">Miscellaneous allergy</p>
                        </td>
                        <td colspan="1">&lt;none&gt;</td>
                     </tr>
                     <tr>
                        <td colspan="1">
                           <p class="UserTableBody">Miscellaneous contraindication</p>
                        </td>
                        <td colspan="1">&lt;none&gt;</td>
                     </tr>
                     <tr>
                        <td colspan="1">
                           <p class="UserTableBody">Environmental Allergy</p>
                        </td>
                        <td colspan="1">
                           <span>environment</span>
                        </td>
                     </tr>
                     <tr>
                        <td colspan="1">
                           <p class="UserTableBody">Animal Allergy</p>
                        </td>
                        <td colspan="1">environment</td>
                     </tr>
                     <tr>
                        <td>
                           <p class="UserTableBody">Plant Allergy</p>
                        </td>
                        <td>
                           <span>environment</span>
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <p class="UserTableBody">Pollen Allergy</p>
                        </td>
                        <td>
                           <span>environment</span>
                        </td>
                     </tr>
                  </tbody>
               </table>
               <p class="auto-cursor-target">
                  <br/>
               </p>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">The FHIR table has a "required" binding. Do we need to expand the values in the FHIR table?</td>
         </tr>
         <tr>
            <td colspan="1">
               <span>AL1-03.00.00 - Allergen Code/Mnemonic/Description</span>
            </td>
            <td colspan="1">This field uniquely identifies a particular allergen.  This element may conform to some external, standard coding system (that must be identified), or it may conform to local, largely textual or mnemonic descriptions.</td>
            <td colspan="1">CWE</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">AllergyIntolerance.code</td>
            <td colspan="1">
               <span style="color: rgb(51,51,51);">Code that identifies the allergy or intolerance</span>
            </td>
            <td colspan="1">CodeableConcept</td>
            <td colspan="1">See CWE mappings</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
         </tr>
         <tr>
            <td colspan="1">
               <span>AL1-04.00.00 - Allergy Severity Code</span>
            </td>
            <td colspan="1">This field indicates the general severity of the allergy.</td>
            <td colspan="1">CWE</td>
            <td colspan="1">
               <span>May not repeat</span>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">AllergyIntolerance.reaction.severity</td>
            <td colspan="1">
               <span style="color: rgb(51,51,51);">Clinical assessment of the severity of the reaction event as a whole, potentially considering multiple different manifestations.</span>
            </td>
            <td colspan="1">code</td>
            <td colspan="1">
               <p>Need a mapping table</p>
               <table class="wrapped">
                  <tbody>
                     <tr>
                        <th>v2</th>
                        <th>FHIR</th>
                     </tr>
                     <tr>
                        <td>
                           <p class="UserTableBody">SV Severe</p>
                        </td>
                        <td>severe</td>
                     </tr>
                     <tr>
                        <td colspan="1">MO Moderate</td>
                        <td colspan="1">moderate</td>
                     </tr>
                     <tr>
                        <td colspan="1">MI Mild</td>
                        <td colspan="1">mild</td>
                     </tr>
                     <tr>
                        <td colspan="1">
                           <p class="UserTableBody">U Unknown</p>
                        </td>
                        <td colspan="1">&lt;none&gt;</td>
                     </tr>
                  </tbody>
               </table>
               <p class="auto-cursor-target">How do we handle unknown?</p>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <p>AllergyIntolerance.reaction can repeat, presumably to capture both multiple manifestations of the reaction (rash and nausea) as well as reactions to independent exposures (last week and last month) - we may want to confirm this understanding.</p>
               <p>Consider using AllergyIntolerance.criticality</p>
            </td>
         </tr>
         <tr>
            <td colspan="1">
               <span>AL1-05.00.00 - Allergy Reaction Code</span>
            </td>
            <td colspan="1">This field identifies the specific allergic reaction that was documented.  This element may conform to some external, standard coding system, or it may conform to local, largely textual or mnemonic descriptions (e.g., convulsions, sneeze, rash, etc.)</td>
            <td colspan="1">ST</td>
            <td colspan="1">
               <span>Allowed to repeat</span>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">AllergyIntolerance.reaction.manifestation.text</td>
            <td colspan="1">
               <span style="color: rgb(51,51,51);">Clinical symptoms and/or signs that are observed or associated with the adverse reaction event.</span>
            </td>
            <td colspan="1">CodeableConcept</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <p>Mapping from a string to a code is likely not possible.</p>
               <p>Because this can repeat, multiple AllergyIntolerance.reaction groups may be necessary. If so, the severity will like be used in all iterations.</p>
            </td>
         </tr>
         <tr>
            <td colspan="1">
               <span>AL1-06.00.00 - Identification Date</span>
            </td>
            <td colspan="1">This<p>field contains the date that the allergy was identified.</p>
            </td>
            <td colspan="1">DT</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">AllergyIntolerance.onset[x]</td>
            <td colspan="1">
               <span style="color: rgb(51,51,51);">When allergy or intolerance was identified</span>
            </td>
            <td colspan="1">variable - likely DateTime</td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
            <td colspan="1">
               <br/>
            </td>
         </tr>
      </tbody>
   </table>
   <p class="auto-cursor-target">
      <br/>
   </p>
</div>
