<?xml version="1.0" encoding="UTF-8"?>

<ConceptMap xmlns="http://hl7.org/fhir">
  <id value="segment-msh-to-messageheader"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><h2>Segment_MSH_Map (http://hl7.org/fhir/v2-tofhir)</h2><p>Mapping from https://www.hl7.org/v2 to https://www.hl7.org/fhir</p><p>ACTIVE (not intended for production usage). Published on Mar 1, 2020, 12:00:00 AM by HL7 International (HL7 Orders and Observations Workgroup: <a href="mailto:https://confluence.hl7.org/display/OO/v2-to-FHIR+IG">https://confluence.hl7.org/display/OO/v2-to-FHIR+IG</a>, Keith W. Boone: <a href="mailto:kboone@ainq.com">kboone@ainq.com</a>). Copyright (c) 2020, HL7 International, Inc., All Rights Reserved.</p><div><p>This ConceptMap represents the mapping from the HL7 V2 MSH Segment to the FHIR MessageHeader Resource representing that segment.</p>
</div><br/><table class="grid"><tr><td><b>Source Code</b></td><td><b>Relationship</b></td><td><b>Destination Code</b></td><td><b>Comment</b></td></tr><tr><td>MSH-3</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.source</td><td>Example: MSH|^~%|LAB^2.16.840.1.113883.3.987.1^ISO|...
Example: MSH|^~%|LAB|…
How do we populate this if MSH-3 is not valued?</td></tr><tr><td>MSH-4</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.sender(Organization)</td><td>How do we populate this if MSH-4 is not valued?
How do we represent HD and identifiers? Need to work with InM.
Should consider aligning sender/receiver constructs.
Open gForge to request that </td></tr><tr><td>MSH-5</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.destination[1]</td><td>Example: MSH...|RH^2.16.840.1.113883.632.3^ISO|...</td></tr><tr><td>MSH-6</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.destination[1].receiver(Organization)</td><td/></tr><tr><td>MSH-7</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>Bundle.timestamp</td><td/></tr><tr><td>MSH-8</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.meta.security</td><td/></tr><tr><td>MSH-9</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.event.coding</td><td>Set up time with InM.  Set up mapping tables for all components (message code, trigger event, structure)</td></tr><tr><td>MSH-10</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>Bundle.identifier</td><td>Need a gForge to request a MessageHeader.identifier (https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20704&amp;start=0)
Note that if a message is part of a batch, then the MSH goes to a &quot;sub-bundle&quot;..
Note that as messages switch from V2 to FHIR and the response back from FHIR to V2, the &quot;mapping engine&quot; needs to track the actual MSH.10.00.00 value and Bundle.identifier value to connect responses correctly.</td></tr><tr><td>MSH-10</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>Bundle.type</td><td/></tr><tr><td>MSH-11</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.meta.tag</td><td/></tr><tr><td>MSH-17</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.sender(Organization.address.country)</td><td/></tr><tr><td>MSH-19</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.language</td><td>This does only cover the MessageHeader resource. Need to have clarity that if other resources that are part of the message that do not have Resource.meta.language valued, then it is assumed to follow MessageHeader.meta.language?? Doesn't seem RESTful, so what is the default for Resource.meta.language?</td></tr><tr><td>MSH-22</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.responsible(Organization)</td><td/></tr><tr><td>MSH-23</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.destination[1].receiver(Organization)</td><td>This is an alternate representation of MSH-6.  The local implementation needs to determine whech components of HD vs. XON to be used and whether it may even yield a separate Organization reference.</td></tr><tr><td>MSH-24</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>Messageheader.source.endpoint</td><td/></tr><tr><td>MSH-25</td><td><a href="http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent">is equivalent to</a></td><td>MessageHeader.destination[1].endpoint</td><td>This is an alternate representation of MSH-5.  Need to agree on prioritization.</td></tr></table></div>
  </text>
  <url value="http://hl7.org/fhir/v2-tofhir"/>
  <version value="0.1.0"/>
  <name value="Segment_MSH_Map"/>
  <status value="active"/>
  <experimental value="true"/>
  <date value="2020-03-01T00:00:00-05:00"/>
  <publisher value="HL7 International"/>
  <contact>
    <name value="HL7 Orders and Observations Workgroup"/>
    <telecom>
      <system value="email"/>
      <value value="https://confluence.hl7.org/display/OO/v2-to-FHIR+IG"/>
    </telecom>
  </contact>
  <contact>
    <name value="Keith W. Boone"/>
    <telecom>
      <system value="email"/>
      <value value="kboone@ainq.com"/>
    </telecom>
  </contact>
  <description value="This ConceptMap represents the mapping from the HL7 V2 MSH Segment to the FHIR MessageHeader Resource representing that segment."/>
  <copyright value="Copyright (c) 2020, HL7 International, Inc., All Rights Reserved."/>
  <sourceUri value="https://www.hl7.org/v2"/>
  <targetUri value="https://www.hl7.org/fhir"/>
  <group>
    <element>
      <code value="MSH-3"/>
      <display value="Sending Application"/>
      <target>
        <code value="MessageHeader.source"/>
        <equivalence value="equivalent"/>
        <comment value="Example: MSH|^~%|LAB^2.16.840.1.113883.3.987.1^ISO|...&#xA;Example: MSH|^~%|LAB|&#x2026;&#xA;How do we populate this if MSH-3 is not valued?"/>
      </target>
    </element>
    <element>
      <code value="MSH-4"/>
      <display value="Sending Facility"/>
      <target>
        <code value="MessageHeader.sender(Organization)"/>
        <equivalence value="equivalent"/>
        <comment value="How do we populate this if MSH-4 is not valued?&#xA;How do we represent HD and identifiers? Need to work with InM.&#xA;Should consider aligning sender/receiver constructs.&#xA;Open gForge to request that "/>
      </target>
    </element>
    <element>
      <code value="MSH-5"/>
      <display value="Receiving Application"/>
      <target>
        <code value="MessageHeader.destination[1]"/>
        <equivalence value="equivalent"/>
        <comment value="Example: MSH...|RH^2.16.840.1.113883.632.3^ISO|..."/>
      </target>
    </element>
    <element>
      <code value="MSH-6"/>
      <display value="Receiving Facility"/>
      <target>
        <code value="MessageHeader.destination[1].receiver(Organization)"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-7"/>
      <display value="Date/Time of Message"/>
      <target>
        <code value="Bundle.timestamp"/>
        <display value="= MSH-7"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-8"/>
      <display value="Security"/>
      <target>
        <code value="MessageHeader.meta.security"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-9"/>
      <display value="Message Type"/>
      <target>
        <code value="MessageHeader.event.coding"/>
        <equivalence value="equivalent"/>
        <comment value="Set up time with InM.  Set up mapping tables for all components (message code, trigger event, structure)"/>
      </target>
    </element>
    <element>
      <code value="MSH-10"/>
      <display value="Message Control ID"/>
      <target>
        <code value="Bundle.identifier"/>
        <equivalence value="equivalent"/>
        <comment value="Need a gForge to request a MessageHeader.identifier (https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20704&amp;start=0)&#xA;Note that if a message is part of a batch, then the MSH goes to a &quot;sub-bundle&quot;..&#xA;Note that as messages switch from V2 to FHIR and the response back from FHIR to V2, the &quot;mapping engine&quot; needs to track the actual MSH.10.00.00 value and&#xA0;Bundle.identifier value to connect responses correctly."/>
      </target>
    </element>
    <element>
      <code value="MSH-10"/>
      <display value="Message Control ID"/>
      <target>
        <code value="Bundle.type"/>
        <display value="= &quot;message&quot;"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-11"/>
      <display value="Processing ID"/>
      <target>
        <code value="MessageHeader.meta.tag"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-17"/>
      <display value="Country Code"/>
      <target>
        <code value="MessageHeader.sender(Organization.address.country)"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-19"/>
      <display value="Principal Language Of Message"/>
      <target>
        <code value="MessageHeader.language"/>
        <equivalence value="equivalent"/>
        <comment value="This does only cover the MessageHeader resource. Need to have clarity that if other resources that are part of the message that do not have Resource.meta.language valued, then it is assumed to follow MessageHeader.meta.language?? Doesn&#39;t seem RESTful, so what is the default for Resource.meta.language?"/>
      </target>
    </element>
    <element>
      <code value="MSH-22"/>
      <display value="Sending Responsible Organization"/>
      <target>
        <code value="MessageHeader.responsible(Organization)"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-23"/>
      <display value="Receiving Responsible Organization"/>
      <target>
        <code value="MessageHeader.destination[1].receiver(Organization)"/>
        <equivalence value="equivalent"/>
        <comment value="This is an alternate representation of MSH-6.  The local implementation needs to determine whech components of HD vs. XON to be used and whether it may even yield a separate Organization reference."/>
      </target>
    </element>
    <element>
      <code value="MSH-24"/>
      <display value="Sending Network Address"/>
      <target>
        <code value="Messageheader.source.endpoint"/>
        <equivalence value="equivalent"/>
      </target>
    </element>
    <element>
      <code value="MSH-25"/>
      <display value="Receiving Network Address"/>
      <target>
        <code value="MessageHeader.destination[1].endpoint"/>
        <equivalence value="equivalent"/>
        <comment value="This is an alternate representation of MSH-5.  Need to agree on prioritization."/>
      </target>
    </element>
  </group>
</ConceptMap>