{
  "resourceType": "ConceptMap",
  "id": "message-adt-a08-to-bundle",
  "description": "This ConceptMap represents the mapping from the HL7 V2 ADT_A08 Message to the FHIR Message Bundle.",
  "url": "http://hl7.org/fhir/v2-tofhir/message-adt-a08-to-bundle",
  "version": "1.0",
  "name": "Message_ADT_A08_Map",
  "status": "active",
  "experimental": true,
  "date": "2020-07-13",
  "publisher": "HL7 International, Inc",
  "contact": [
    {
      "telecom": [
        {
          "system": "email",
          "value": "v2-to-fhir@lists.hl7.org"
        }
      ]
    }
  ],
  "copyright": "Copyright (c) 2020, HL7 International, Inc., All Rights Reserved.",
  "sourceUri": "ADT_A08",
  "targetUri": "Bundle",
  "group": [
    {
      "element": [
        {
          "code": "ADT_A08.MSH",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Message Header",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Bundle",
              "display": "Bundle",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[Bundle]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.MSH",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Message Header",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "MessageHeader[1]",
              "display": "MessageHeader[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[General]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.MSH",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Message Header",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Provenance[1]",
              "display": "Provenance[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[Provenance-Originator]"
                },
                {
                  "property": "references",
                  "value": "Provenance.target=Bundle; Provenance.target=MessageHeader[MSH]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.MSH",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Message Header",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Provenance[2]",
              "display": "Provenance[2]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[Provenance-Translator]"
                },
                {
                  "property": "references",
                  "value": "Provenance.target=Bundle; Provenance.target=MessageHeader[MSH]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.SFT",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Software Segment",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "MessageHeader[1]",
              "display": "MessageHeader[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "SFT"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.EVN",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Event Type",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Provenance[3]",
              "display": "Provenance[3]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "EVN"
                },
                {
                  "property": "references",
                  "value": "Provenance.target=Bundle; Provenance.target=MessageHeader[MSH]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.PID",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Patient Identification",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Patient[1]",
              "display": "Patient[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PID"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.PD1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Additional Demographics",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Patient[1]",
              "display": "Patient[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PD1"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08:follow:PID.ARV",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Access Restrictions",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Patient[1]",
              "display": "Patient[1]",
              "dependsOn": [
                {
                  "property": "antlr",
                  "value": "IF ARV-1 IN (\"PID\", \"PD1\") AND ARV-3 NOT VALUED"
                },
                {
                  "property": "segment-map",
                  "value": "ARV"
                },
                {
                  "property": "references",
                  "value": "Resource=Patient[1]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08:follow:PID.ROL",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Role",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Patient[1].generalPractitioner",
              "display": "Patient[1].generalPractitioner",
              "dependsOn": [
                {
                  "property": "antlr",
                  "value": "IF ROL-3.1 EQUALS \"PP\" AND ROL-3.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"3.1\")=\"PP\")and(element(\"3.3\")=\"HL70443\")"
                },
                {
                  "property": "segment-map",
                  "value": "ROL[PID/PD1-PractitionerRole]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08:follow:PID.ROL",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Role",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "RelatedPerson[1]",
              "display": "RelatedPerson[1]",
              "dependsOn": [
                {
                  "property": "antlr",
                  "value": "IF ROL-3.1 NOT EQUALS  \"PP\" OR ROL-3.3 NOT EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"3.1\")!=\"PP\")or(element(\"3.3\")!=\"HL70443\")"
                },
                {
                  "property": "narrative",
                  "value": "While most likely all other HL70443 values go to RelatedPerson, the implementation needs to determine whether that is fully accurate."
                },
                {
                  "property": "segment-map",
                  "value": "ROL[PID/PD1-RelatedPerson]"
                },
                {
                  "property": "references",
                  "value": "RelatedPerson[1].patient.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.NEXT_OF_KIN.NK1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Next of Kin / Associated Parties",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "RelatedPerson[2]",
              "display": "RelatedPerson[2]",
              "dependsOn": [
                {
                  "property": "narrative",
                  "value": "The FHIR location will depend on the nature of the data being exchanged and how the systems use next of kin data"
                },
                {
                  "property": "segment-map",
                  "value": "NK1[RelatedPerson]"
                },
                {
                  "property": "references",
                  "value": "RelatedPerson[2].patient.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.NEXT_OF_KIN.NK1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Next of Kin / Associated Parties",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Patient[1]",
              "display": "Patient[1]",
              "dependsOn": [
                {
                  "property": "narrative",
                  "value": "The FHIR location will depend on the nature of the data being exchanged and how the systems use next of kin data"
                },
                {
                  "property": "segment-map",
                  "value": "NK1[Patient.contact]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.PV1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Patient Visit",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PV1"
                },
                {
                  "property": "references",
                  "value": "Encounter[1].subject.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.PV2",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Patient Visit - Additional Info.",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PV2"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08:follow:PV1.ARV",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Access Restrictions",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "dependsOn": [
                {
                  "property": "antlr",
                  "value": "IF ARV-1 IN (\"PV1\", \"PV2\") AND ARV-3 NOT VALUED"
                },
                {
                  "property": "segment-map",
                  "value": "ARV"
                },
                {
                  "property": "references",
                  "value": "Resource=Encounter[1]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08:follow:PV1.ROL",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Role",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "ROL[PV1/PV2 - PractitionerRole]"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.OBSERVATION.OBX",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Observation/Result",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Observation",
              "display": "Observation",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "OBX[Observation]"
                },
                {
                  "property": "references",
                  "value": "Observation.subject.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.OBSERVATION.OBX",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Observation/Result",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Observation",
              "display": "Observation",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "OBX[ObservationComponent]"
                },
                {
                  "property": "references",
                  "value": "Observation.subject.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.AL1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Allergy Information",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "AllergyIntolerance",
              "display": "AllergyIntolerance",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "AL1"
                },
                {
                  "property": "references",
                  "value": "AllergyIntolerance.patient.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.DG1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Diagnosis Information",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Condition",
              "display": "Condition",
              "dependsOn": [
                {
                  "property": "narrative",
                  "value": "If in context of the patient"
                },
                {
                  "property": "segment-map",
                  "value": "DG1"
                },
                {
                  "property": "references",
                  "value": "Condition.subject.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.DG1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Diagnosis Information",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "dependsOn": [
                {
                  "property": "antlr",
                  "value": "IF DG1-6 EQUALS \"admitting\""
                },
                {
                  "property": "segment-map",
                  "value": "DG1"
                },
                {
                  "property": "references",
                  "value": "Encounter[1].diagnosis.reference=Condition[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.DG1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Diagnosis Information",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "dependsOn": [
                {
                  "property": "narrative",
                  "value": "If in context of an encounter"
                },
                {
                  "property": "segment-map",
                  "value": "DG1"
                },
                {
                  "property": "references",
                  "value": "Encounter[1].diagnosis.reference=Condition[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.DG1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Diagnosis Information",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "EpisodeOfCare[1]",
              "display": "EpisodeOfCare[1]",
              "dependsOn": [
                {
                  "property": "narrative",
                  "value": "If in context of a episode of care"
                },
                {
                  "property": "segment-map",
                  "value": "DG1"
                },
                {
                  "property": "references",
                  "value": "EpisodeOfCare.diagnosis.reference=Condition[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.PROCEDURE.PR1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Procedures",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Procedure",
              "display": "Procedure",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PR1"
                },
                {
                  "property": "references",
                  "value": "Procedure.subject.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.INSURANCE.IN1",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Insurance",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Coverage",
              "display": "Coverage",
              "dependsOn": [
                {
                  "property": "references",
                  "value": "Coverage.subscriber.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "code": "ADT_A08.INSURANCE.IN2",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ]
            }
          ],
          "display": "Insurance Additional Info.",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Coverage",
              "display": "Coverage"
            }
          ]
        },
        {
          "code": "ADT_A08.INSURANCE.IN3",
          "extension": [
            {
              "url": "http://hl7.org/fhir/v2-tofhir/StructureDefinition/TypeInfo",
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ]
            }
          ],
          "display": "Insurance Additional Info - Cert.",
          "target": [
            {
              "equivalence": "equivalent",
              "code": "Coverage",
              "display": "Coverage"
            }
          ]
        }
      ]
    }
  ]
}
